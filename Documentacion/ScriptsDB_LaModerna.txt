
CREATE TABLE Compania(idCompania varchar(4)  NOT NULL,
 					  nombre     varchar(70) NOT NULL,
 					  estatus    tinyint(1)  DEFAULT '1',
 					  idBaja     varchar(10) DEFAULT NULL,
 					  PRIMARY KEY (idCompania),
 					  FOREIGN KEY (idBaja) REFERENCES Usuario(idusuario));

CREATE TABLE Agente(idRepresentante  varchar(10) NOT NULL,
 					nomRepresentante varchar(30) DEFAULT NULL,
					idCompania       varchar(4)  NOT NULL,
   					estatus 		 tinyint(1)  DEFAULT '1',
 					idBaja 			 varchar(10) DEFAULT NULL,
 					PRIMARY KEY (idRepresentante),
 					FOREIGN KEY (idCompania) REFERENCES Compania (idcompania),
					FOREIGN KEY (idBaja) 	 REFERENCES Usuario (idusuario));

CREATE TABLE Almacen(idAlmacen   varchar(4)  NOT NULL,
					 descripcion varchar(70) DEFAULT NULL,
 					 idCompania  varchar(4)  NOT NULL,
  					 estatus     tinyint(1)  DEFAULT '1',
 					 idBaja      varchar(10) DEFAULT NULL,
 					 PRIMARY KEY (idAlmacen),
 					 FOREIGN KEY (idCompania) REFERENCES Compania(idcompania),
					 FOREIGN KEY (idBaja)	  REFERENCES Usuario(idusuario));

CREATE TABLE ArticuloExistente(idArticulo  	  varchar(20)  NOT NULL,
 							   idCompania  	  varchar(4)   NOT NULL,
 							   descripcion    varchar(70)  NOT NULL,
 							   costosEstandar double(15,4) NOT NULL,
 							   estatus 		  tinyint(1)   DEFAULT '1',
							   idBaja 		  varchar(10)  DEFAULT NULL,
 							   PRIMARY KEY (idArticulo),
 							   FOREIGN KEY (idCompania) REFERENCES Compania(idcompania),
							   FOREIGN KEY (idBaja) 	REFERENCES Usuario(idusuario));

CREATE TABLE ArticuloVendido(folio 		int(11) 	 NOT NULL AUTO_INCREMENT,
 							 idArticulo varchar(20)  NOT NULL,
 							 idCompania varchar(4)   NOT NULL,
 							 idCliente  varchar(10)  NOT NULL,
							 stock      double(15,2) DEFAULT NULL,
 							 codAviso   varchar(3)   NOT NULL,
 							 udVta 		varchar(4)   NOT NULL,
 							 estatus    tinyint(1)   DEFAULT '1',
 							 idBaja     varchar(10)  DEFAULT NULL,
 							 PRIMARY KEY (folio),
							 FOREIGN KEY (idArticulo) REFERENCES ArticuloExistente (idarticulo),
 							 FOREIGN KEY (idCompania) REFERENCES Compania(idcompania),
 							 FOREIGN KEY (idCliente)  REFERENCES Cliente(idcliente),
 							 FOREIGN KEY (idBaja)     REFERENCES Usuario(idusuario));

CREATE TABLE CantEntregada (idCompania varchar(4)   NOT NULL,
							idOrden    bigint(10)   NOT NULL,
 							folio      int(11)      NOT NULL,
 							fechaMov   varchar(10)  NOT NULL,
 							hora       varchar(10)  NOT NULL,
 							secuencia  int(11) 	    NOT NULL,
 							tipoReg    int(11) 	    NOT NULL,
 							cantidad   double(15,2) DEFAULT NULL,
 							idArticulo varchar(20)  NOT NULL,
 							posicion   int(11)      NOT NULL,
 							estatus    tinyint(1)   DEFAULT '1',
 							idBaja     varchar(10)  DEFAULT NULL,
 							FOREIGN KEY (idCompania) REFERENCES Compania(idcompania),
 							FOREIGN KEY (idArticulo) REFERENCES ArticuloExistente(idarticulo),
 							FOREIGN KEY (idOrden)    REFERENCES Orden(idorden),
 							FOREIGN KEY (folio) 	 REFERENCES ArticuloVendido(folio),
 							FOREIGN KEY (idBaja)     REFERENCES Usuario(idusuario));

CREATE TABLE Cliente(idCliente  	 varchar(10)  NOT NULL,
 					 idCompania 	 varchar(4)   NOT NULL,
 					 idRepresentante varchar(10)  NOT NULL,
 					 idLista 		 varchar(10)  NOT NULL,
 					 idAlmacen       varchar(4)   DEFAULT NULL,
 					 nombreCliente   varchar(100) NOT NULL,
 					 estatusCliente  int(11) 	  NOT NULL,
 					 analista		 varchar(10)  NOT NULL,
 					 divisa			 varchar(3)   NOT NULL,
 					 limCredito      bigint(10)   NOT NULL,
  					 saldoOrden		 double(15,2) DEFAULT NULL,
 					 saldoFactura    double(15,2) DEFAULT NULL,
 					 bloqueo 		 tinyint(1)   DEFAULT NULL,
 					 estatus         tinyint(1)   DEFAULT '1',
 					 idBaja          varchar(10)  DEFAULT NULL,
 					 PRIMARY KEY (idCliente),
 					 FOREIGN KEY (idCompania) 	   REFERENCES Compania(idcompania),
					 FOREIGN KEY (idRepresentante) REFERENCES Agente(idrepresentante),
					 FOREIGN KEY (idAlmacen) 	   REFERENCES Almacen(idalmacen),
 					 FOREIGN KEY (idBaja)		   REFERENCES Usuario(idusuario));

CREATE TABLE DirEnt(idCompania 	  varchar(4)   NOT NULL,
 					idCliente  	  varchar(10)  NOT NULL,
					dirEnt     	  varchar(10)  NOT NULL,
 					nombreEntrega varchar(50)  NOT NULL,
 					direccion     varchar(100) NOT NULL,
 					municipio     varchar(30)  NOT NULL,
 					estado		  varchar(30)  NOT NULL,
 					telefono      varchar(20)  NOT NULL,
 					observaciones varchar(100) NOT NULL,
 					codPost  	  varchar(5)   NOT NULL,
  					codRuta 	  varchar(5)   NOT NULL,
 					pais		  varchar(3)   NOT NULL,
 					rfc			  varchar(20)  NOT NULL,
 					estatus 	  tinyint(1)   DEFAULT '1',
 					idBaja		  varchar(10)  DEFAULT NULL,
					FOREIGN KEY (idCompania) REFERENCES Compania(idcompania),
 					FOREIGN KEY (idCliente)  REFERENCES Cliente(idcliente),
 					FOREIGN KEY (idBaja)	 REFERENCES Usuario(idusuario));




CREATE TABLE Factura(numFact    bigint(10)  NOT NULL,
 					 idCompania varchar(4)  NOT NULL,
 					 idOrden    bigint(10)  NOT NULL,
 					 idArticulo varchar(20) NOT NULL,
					 idCliente  varchar(10) NOT NULL,
 					 folio	    int(11) 	NOT NULL,
 					 entrega    int(11) 	NOT NULL,
 					 tipoTrans  varchar(4)  NOT NULL,
 					 fechaFac   varchar(10) NOT NULL,
 					 estatus    tinyint(1)  DEFAULT '1',
    				 idBaja	    varchar(10) DEFAULT NULL,
					 FOREIGN KEY (idCompania) REFERENCES Compania(idcompania),
 					 FOREIGN KEY (idOrden) 	  REFERENCES Orden(idorden),
 					 FOREIGN KEY (idArticulo) REFERENCES ArticuloExistente(idarticulo),
 					 FOREIGN KEY (idCliente)  REFERENCES Cliente(idcliente),
 					 FOREIGN KEY (folio)	  REFERENCES ArticuloVendido(folio),
 					 FOREIGN KEY (idBaja)     REFERENCES Usuario(idusuario));

CREATE TABLE Inventario(idCompania varchar(4)   NOT NULL,
						idAlmacen  varchar(4)   NOT NULL,
 						idArticulo varchar(20)  NOT NULL,
 						stock      double(15,2) NOT NULL,
 						estatus    tinyint(1)   DEFAULT '1',
 						idBaja     varchar(10)  DEFAULT NULL,
 						FOREIGN KEY (idCompania) REFERENCES Compania(idcompania),
 						FOREIGN KEY (idAlmacen)  REFERENCES Almacen(idalmacen),
						FOREIGN KEY (idArticulo) REFERENCES ArticuloExistente(idarticulo),
						FOREIGN KEY (idBaja)	 REFERENCES Usuario(idusuario));


CREATE TABLE ListaPrecio(idCompania 	varchar(4)   NOT NULL,
 						 idLista    	varchar(10)  NOT NULL,
 						 idArticulo 	varchar(20)  NOT NULL,
 						 descuento  	float(15,2)  NOT NULL,
 						 precio     	double(15,2) NOT NULL,
 						 cantOlmp   	bigint(10) 	 NOT NULL,
 						 nivelDscto     int(11) 	 NOT NULL,
 						 fechaCaducidad varchar(10)  NOT NULL,
 						 fechaInicio    varchar(10)  NOT NULL,
 						 impDesc	 	double(15,2) NOT NULL,
 						 estatus 	 	tinyint(1)   DEFAULT '1',
 						 idBaja			varchar(10)  DEFAULT NULL,
						 FOREIGN KEY (idCompania) REFERENCES Compania(idcompania),
						 FOREIGN KEY (idArticulo) REFERENCES ArticuloExistente(idarticulo),
 						 FOREIGN KEY (idBaja) 	  REFERENCES Usuario(idusuario));

CREATE TABLE Orden (idOrden     bigint(10)  NOT NULL,
 					idCompania  varchar(4)  NOT NULL,
					idCliente   varchar(10) NOT NULL,
 					dirEnt 		varchar(10) NOT NULL,
 					estatus     tinyint(1)  DEFAULT NULL,
 					ordenCompra bigint(10)  NOT NULL,
 					fechaOrden  date 		NOT NULL,
 					tFac	 	date 		DEFAULT NULL,
 					tCXC	 	date 		DEFAULT NULL,
 					tPRE 		date 		DEFAULT NULL,
 					tCST 		date		DEFAULT NULL,
 					tING		date 		DEFAULT NULL,
 					tPLN 		date 		DEFAULT NULL,
 					tFEC		date 		DEFAULT NULL,
 					total		float(15,2) NOT NULL,
 					vFacturas	tinyint(1)  NOT NULL,
 					vCxC	 	tinyint(1)  NOT NULL,
 					vPrecios    tinyint(1)  NOT NULL,
 					vCostos 	tinyint(1)  NOT NULL,
 					vIng		tinyint(1)  NOT NULL,
 					vPlaneacion tinyint(1)  NOT NULL, 
 					vServCli    tinyint(1)  NOT NULL,
 					vREP 		tinyint(1)  NOT NULL,
 					vFEC        tinyint(1)  NOT NULL,
 					estatusDB   tinyint(1)  DEFAULT '1',
 					idBaja 		varchar(10) DEFAULT NULL,
 					FOREIGN KEY (idCompania) REFERENCES Compania(idcompania),
 					FOREIGN KEY (idCliente)  REFERENCES Cliente(idcliente),
 					FOREIGN KEY (idBaja)	 REFERENCES Usuario(idusuario));

CREATE TABLE ReporteOrden (idOrden        bigint(10)  NOT NULL,
 						  idCompania     varchar(4)   NOT NULL,
						  folio          int(11) 	  NOT NULL,
 						  folioRO        int(11) 	  NOT NULL AUTO_INCREMENT,
 						  numFact        bigint(10)   DEFAULT NULL,
 						  ordenBaan      bigint(10)   DEFAULT NULL,
 						  idCliente      varchar(10)  NOT NULL,
 						  nombreCliente  varchar(100) NOT NULL,
 						  dirEnt         varchar(10)  NOT NULL,
 						  idArticulo     varchar(20)  NOT NULL,
 						  ordenCompra    bigint(10)   NOT NULL,
     					  cantidad       double(15,2) NOT NULL,
 						  precio  		 double(15,2) NOT NULL,
 						  descripcion    varchar(70)  NOT NULL,
  						  fechaSolicitud date 		  DEFAULT NULL,
 						  fechaEntrega   date 		  DEFAULT NULL,
 						  producido      int(11) 	  NOT NULL,
 						  entregado      int(11) 	  NOT NULL,
 					 	  acumulado      int(11) 	  NOT NULL,
 						  total  		 float(15,2)  NOT NULL,
 						  costo 		 float(15,2)  DEFAULT NULL,
  						  moneda         varchar(3)   NOT NULL,
 						  nota 			 varchar(70)  DEFAULT NULL,
 						  estatus   	 tinyint(1)   DEFAULT '1',
 						  idBaja 		 varchar(10)  DEFAULT NULL,
 						  PRIMARY KEY (folioRO),
						  FOREIGN KEY (idOrden)    REFERENCES Orden(idorden),
						  FOREIGN KEY (idCompania) REFERENCES Compania(idcompania),
 						  FOREIGN KEY (idArticulo) REFERENCES ArticuloExistente(idarticulo),
						  FOREIGN KEY (idCliente)  REFERENCES Cliente(idcliente),
						  FOREIGN KEY (idBaja)     REFERENCES Usuario(idusuario),
						  FOREIGN KEY (folio) 	   REFERENCES ArticuloVendido(folio));


CREATE TABLE Parametro(servidor   varchar(20) NOT NULL,
 					   idUsuario  varchar(20) NOT NULL,
 					   contrasena varchar(20) NOT NULL,
 					   puerto     varchar(20) NOT NULL.
 					   idCompania varchar(4)  NOT NULL,
 					   activo     tinyint(4)  NOT NULL.
 					   FOREIGN KEY idCompania REFERENCES Compania(idCompania));

CREATE TABLE Permiso(idUsuario   varchar(20) NOT NULL,
 					 permiso     varchar(20) NOT NULL,
 					 idCompania  varchar(4)  NOT NULL,
 					 descripcion varchar(70) DEFAULT NULL,
					 FOREIGN KEY (idUsuario)  REFERENCES Usuario(idusuario),
 					 FOREIGN KEY (idCompania) REFERENCES Compania(idcompania));

CREATE TABLE Rol (idCompania varchar(4) NOT NULL,
 				  rol 		 varchar(3) NOT NULL,
 				  FOREIGN KEY (idCompania) REFERENCES Compania(idcompania));

CREATE TABLE Usuario (idUsuario  varchar(20)  NOT NULL,
 					  idCompania varchar(4)   NOT NULL,
 					  nomUsuario varchar(100) NOT NULL,
 					  contrasena varchar(200) NOT NULL,
 					  rol		 varchar(3)   NOT NULL,
 					  PRIMARY KEY (idUsuario),
 					  FOREIGN KEY (idCompania) REFERENCES Compania (idcompania));





